<!doctype html>
<html lang="ko">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" 
            integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="css/cartoonaf.css">

        <!-- Sidebar 3rd CSS -->
        <link rel="stylesheet" href="css/sidebar3.css">

        <!-- Sidebar 3rd CSS -->
        <link rel="stylesheet" href="css/style.css">

        <!-- Scrollbar Custom CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">

        <!-- Google fonts -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Do+Hyeon&display=swap" >

        <!-- Standard page -->
        <link rel="canonical" href="https://cartoonaf.touchizen.com" />

        <!-- Font Awesome JS -->
        <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
        <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>

        <!-- Global site tag (gtag.js) - Google Analytics-->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-167120448-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }
            gtag('js', new Date());
            gtag('config', 'UA-167120448-1');
        </script>

        <!-- image slider, https://jssor.com-->
        <script src="js/jssor.slider-28.0.0.min.js" type="text/javascript"></script>

        <!-- addthis.com -->
        <!--script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5ecd15f9b94a6415"></script-->

        <!-- Title, meta infos of browser tab-->
        <title>사진 카툰화 & 동물상 테스트</title>
        <meta name="title" content="카툰화와 동물상 테스트">
        <meta name="subject" content="얼굴로 보는 카툰화와 인공지능 동물상 테스트, 나와 닮은 카툰화를 작성하고  동물상을 찾아보세요!">
        <meta name="keywords" content="카툰화, cartoonize, cartoon, 카툰, 카툰화와 동물상 테스트, 인공지능 동물상 테스트, 얼굴상, 얼굴상 테스트, 나와 닮은 동물, 동물상 찾기, 얼굴로 보는 동물상, 얼굴 동물, 동물얼굴, animalface, 강아지상, 고양이상, 여우상, 사슴상, 토끼상, 곰상, 공룡상, 인공지능 동물상, AI 얼굴상, AI 동물상">
        <meta name="author" content="코딩탐험, 조코딩 유투브">
    
    </head>

    <body>
        <div class="wrapper">
            <!-- Sidebar -->
            <nav id="sidebar">
        
                <div id="dismiss">
                    <i class="fas fa-arrow-left"></i>
                </div>
        
                <div class="sidebar-header">
                    <h3>사진 카툰화와 <br> 동물상테스트</h3>
                </div>
        
                <ul class="list-unstyled components">
                    <p>얼굴로 해보는 카툰화와 인공지능 동물상 테스트</p>
                    <li class="active">
                        <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false">Home</a>
                        <ul class="collapse list-unstyled" id="homeSubmenu">
                            <li> <a href="#">Home 1</a> </li>
                            <li> <a href="#">Home 2</a> </li>
                            <li> <a href="#">Home 3</a> </li>
                        </ul>
                    </li>
                    <li>
                        <!--a href="#">About</a-->
                        <a href="#pageSubmenu" data-toggle="collapse" aria-expanded="false">Pages</a>
                        <ul class="collapse list-unstyled" id="pageSubmenu">
                            <li>
                                <a href="#">Page 1</a>
                            </li>
                            <li>
                                <a href="#">Page 2</a>
                            </li>
                            <li>
                                <a href="#">Page 3</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#referenceSubmenu" data-toggle="collapse" aria-expanded="false">참고</a>
                        <ul class="collapse list-unstyled" id="referenceSubmenu">
                            <li>
                                <a href="https://www.youtube.com/channel/UCQNE2JmbasNYbjGAcuBiRRg">조코딩 유튜브채널</a>
                            </li>
                        </ul>                    
                    </li>
                    <li>
                        <a href="https://www.youtube.com/channel/UCHTNaLtro_1I6Y3SSywo3Cg">Author: 인공지능 코딩탐험</a>
                    </li>
                </ul>
            </nav>

            <!-- Page Content -->
            <div id="content">
                
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <div class="container-fluid">

                        <button type="button" id="sidebarCollapse" class="btn btn-info">
                            <i class="fas fa-align-left"></i>
                        </button>
                        <a class="navbar-brand" href="https://cartoonaf.touchizen.com/cartoonaf.html"><i class="fas fa-angle-left"></i>&nbsp;<b>사진 카툰화와 동물상테스트</b></a>

                        <button class="btn btn-dark d-inline-block d-lg-none ml-auto" 
                            type="button" 
                            data-toggle="collapse" 
                            data-target="#navbarSupportedContent" 
                            aria-controls="navbarSupportedContent" 
                            aria-expanded="false" 
                            aria-label="Toggle navigation">
                            <i class="fas fa-align-justify"></i>
                        </button>
        
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="nav navbar-nav ml-auto">
                                <!--li class="nav-item active">
                                    <a class="nav-link" href="#">카툰화와 동물상 테스트
                                        <span class="sr-only">(current)</span>
                                    </a>
                                </li-->
                                <li class="nav-item active" onclick="gtag('event', '코딩탐험 유튜브 클릭', {'event_category': '코딩탐험 유튜브 클릭','event_label': '상단 메뉴'});">
                                    <a class="nav-link" id="yotube-top-link" href="https://www.youtube.com/channel/UCHTNaLtro_1I6Y3SSywo3Cg">인공지능 코딩탐험 유튜브</a>
                                </li>
                            </ul>
                        </div>

                    </div>
                </nav>

                <section>
                    <div class="container">
                        <div class="row justify-content-md-center">
                            <h2 class="subtitle mb-3" id="filtertitle">Gray</h2>
                        </div>
                        <div class="row justify-content-md-center">
                            <img id="fullImage" class = "file-upload-image" src="https://getbootstrap.com/docs/4.5/assets/brand/bootstrap-solid.svg" />
                        </div>
                        <div class="row justify-content-md-center mt-3">
                            <div id="paramTitle0" class="col col-sm-3 text-center">
                                <p>Flags</p>
                            </div>
                            <div id="paramTitle1" class="col col-sm-3 text-center">
                                <p>Sigma_s</p>
                            </div>
                            <div id="paramTitle2" class="col col-sm-3 text-center">
                                <p>Sigma_r</p>
                            </div>
                        </div>
                        <div class="row justify-content-md-center mb-3">
                            <div id="paramNumber0" class="col col-sm-3">
                                <input id="inputNumber0" type="number" value="4.5" data-decimals="2" min="0" max="9" step="0.1" />
                            </div>
                            <div id="paramNumber1" class="col col-sm-3">
                                <input id="inputNumber1" type="number" value="4.5" data-decimals="2" min="0" max="9" step="0.1" />
                            </div>
                            <div id="paramNumber2" class="col col-sm-3">
                                <input id="inputNumber2"  type="number" value="4.5" data-decimals="2" min="0" max="9" step="0.1" />
                            </div>
                        </div>

                        <div class="row justify-content-md-center my-3">
                            <div class="col col-sm-9">
                                <button id="confirmBtn" type="button" class="btn btn-primary btn-lg btn-block">확인</button>
                            </div>
                        </div>

                        <div class="row justify-content-md-center">
                            <div id="addThis" class="addthis_inline_share_toolbox_6lz1"></div>
                        </div>

                        <div class="modal-body d-flex justify-content-center">
                            <ins class = "kakao_ad_area" 
                                style = "display:none;" 
                                data-ad-unit    = "DAN-u8arfl9ia5wh" 
                                data-ad-width   = "300" 
                                data-ad-height  = "250">
                            </ins>
                        </div>                        
                    </div>
                </section>


                <footer class="footer pt-5 container d-flex justify-content-center">
                    <div>
                        <p>&copy; 인공지능 코딩탐험  2020. All Rights Reserved. </p>
                        <ul class="list-inline d-flex justify-content-center">
                            <li class="list-inline-item">
                                <a href="privacy.html">개인정보취급방침</a>
                            </li>

                            <!--li class="list-inline-item">
                                <a href="Terms">Terms</a>
                            </li>
                            <li class="list-inline-item">
                                <a href="https://www.youtube.com/channel/UCHTNaLtro_1I6Y3SSywo3Cg">FAQ</a>
                            </li-->
                        </ul>
                    </div>
                </footer>
            
            </div>
            <!-- Dark Overlay element -->
            <div class="overlay"></div>

        </div>


        <!-- Optional JavaScript -->
        <!--script type="text/javascript" src="https://t1.daumcdn.net/kas/static/ba.min.js" async></script-->

        <script>
            /**
            *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
            *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
            */
    
            var disqus_config = function () {
                this.page.url = "https://cartoonaf.touchizen.com/fullimage.html";  // Replace PAGE_URL with your page's canonical URL variable
                this.page.identifier = "cartoonaf_fullimage"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };
            
            (function() { // DON'T EDIT BELOW THIS LINE
                var d = document, s = d.createElement('script');
                s.src = 'https://codingtrip.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>    
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

        <!-- bootstrap number spinner -->
        <script src="js/bootstrap-input-spinner.min.js" type="text/javascript"></script>

        <!-- jQuery Custom Scroller CDN -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $("#sidebar").mCustomScrollbar({
                    theme: "minimal"
                });

                $('#dismiss, .overlay').on('click', function () {
                    $('#sidebar').removeClass('active');
                    $('.overlay').removeClass('active');
                });

                $('#sidebarCollapse').on('click', function () {
                    $('#sidebar').addClass('active');
                    $('.overlay').addClass('active');
                    $('.collapse.in').toggleClass('in');
                    $('a[aria-expanded=true]').attr('aria-expanded', 'false');
                });
            });

            function parseQueryString() {

                var parsedParameters = {};
                var uriParameters = location.search.substr(1).split('&');

                for (var i = 0; i < uriParameters.length; i++) {
                    var parameter = uriParameters[i].split('=');
                    parsedParameters[parameter[0]] = decodeURIComponent(parameter[1]);
                }

                return parsedParameters;
            }

            function settingParamsforGray(imageTitle) {
                $("#paramTitle0").hide();
                $("#paramTitle1").hide();
                $("#paramTitle2").hide();
                $("#paramNumber0").hide();
                $("#paramNumber1").hide();
                $("#paramNumber2").hide();
                $("#filtertitle").text(imageTitle);
                $("#confirmBtn").hide();
            }

            function settingParamsforEdgePreservingFilter(imageTitle) {
                $("#paramTitle0").show();
                $("#paramTitle1").show();
                $("#paramTitle2").show();
                $("#paramTitle0").html("<p>Flags</p>");
                $("#paramTitle1").html("<p>Sigma_s</p>");
                $("#paramTitle2").html("<p>Sigma_r</p>");

                $("#paramNumber0").show();
                $("#paramNumber1").show();
                $("#paramNumber2").show();
                $("#paramNumber0").html("<input id='inputNumber0' class='form-control-lg input-group-lg' type='number' value='1' min='0' max='100' step='1'/>");
                $("#paramNumber1").html("<input id='inputNumber1' class='form-control-lg input-group-lg' type='number' value='60' min='0' max='100' step='1'/>");
                $("#paramNumber2").html("<input id='inputNumber2' class='form-control-lg input-group-lg' type='number' value='0.4' data-decimals='1' min='0' max='9' step='0.1' />");

                $("#filtertitle").text(imageTitle);
                $("#confirmBtn").show();                
            }

            function settingParamsforDetailEnhanceFilter(imageTitle) {
                $("#paramTitle0").show();
                $("#paramTitle1").show();
                $("#paramTitle2").hide();
                $("#paramTitle0").html("<p>Sigma_s</p>");
                $("#paramTitle1").html("<p>Sigma_r</p>");

                $("#paramNumber0").show();
                $("#paramNumber1").show();
                $("#paramNumber2").hide();
                $("#paramNumber0").html("<input id='inputNumber0' class='form-control-lg input-group-lg' type='number' value='10' min='0' max='100' step='1'/>");
                $("#paramNumber1").html("<input id='inputNumber1' class='form-control-lg input-group-lg' type='number' value='0.15' data-decimals='2' min='0' max='9' step='0.01' />");

                $("#filtertitle").text(imageTitle);
                $("#confirmBtn").show();                
            }

            function settingParamsforStylizationFilter(imageTitle) {
                $("#paramTitle0").show();
                $("#paramTitle1").show();
                $("#paramTitle2").hide();
                $("#paramTitle0").html("<p>Sigma_s</p>");
                $("#paramTitle1").html("<p>Sigma_r</p>");

                $("#paramNumber0").show();
                $("#paramNumber1").show();
                $("#paramNumber2").hide();
                $("#paramNumber0").html("<input id='inputNumber0' class='form-control-lg input-group-lg' type='number' value='60' min='0' max='100' step='1'/>");
                $("#paramNumber1").html("<input id='inputNumber1' class='form-control-lg input-group-lg' type='number' value='0.45' data-decimals='2' min='0' max='9' step='0.01' />");

                $("#filtertitle").text(imageTitle);
                $("#confirmBtn").show();                
            }
            
            function settingParamsforPencilSketchFilter(imageTitle) {
                $("#paramTitle0").show();
                $("#paramTitle1").show();
                $("#paramTitle2").show();
                $("#paramTitle0").html("<p>Sigma_s</p>");
                $("#paramTitle1").html("<p>Sigma_r</p>");
                $("#paramTitle2").html("<p>Shade Factor</p>");
                $("#paramNumber0").show();
                $("#paramNumber1").show();
                $("#paramNumber2").show();
                $("#paramNumber0").html("<input id='inputNumber0' class='form-control-lg input-group-lg' type='number' value='60' min='0' max='100' step='1'/>");
                $("#paramNumber1").html("<input id='inputNumber1' class='form-control-lg input-group-lg' type='number' value='0.07' data-decimals='2' min='0' max='9' step='0.01' />");
                $("#paramNumber2").html("<input id='inputNumber2' class='form-control-lg input-group-lg' type='number' value='0.05' data-decimals='2' min='0' max='9' step='0.01' />");

                $("#filtertitle").text(imageTitle);
                $("#confirmBtn").show();                
            }

            var imageUrl = parseQueryString()['id'];
            var filename = imageUrl.substr(imageUrl.lastIndexOf('/')+1);
            var filenameSplit = filename.split('.');
            var fileTitle = filenameSplit[0];

            switch(fileTitle) {
                case "gray": settingParamsforGray("Gray Filter"); break;
                case "ep": settingParamsforEdgePreservingFilter("Edge Preserving Filter"); break;
                case "de": settingParamsforDetailEnhanceFilter("Detail Enhance Filter"); break;
                case "style": settingParamsforStylizationFilter("Stylization Filter"); break;
                case "ps-gray": settingParamsforPencilSketchFilter("Pencil Sketch in Gray");  break;
                case "ps-color": settingParamsforPencilSketchFilter("Pencil Sketch in Color"); break;
            }

            $("#fullImage").attr("src",imageUrl);

            var config = {
                decrementButton: "<strong>-</strong>", // button text
                incrementButton: "<strong>+</strong>", // ..
                groupClass: "", // css class of the resulting input-group
                buttonsClass: "btn-outline-secondary",
                buttonsWidth: "2.5rem",
                textAlign: "center",
                autoDelay: 500, // ms holding before auto value change
                autoInterval: 100, // speed of auto value change
                boostThreshold: 10, // boost after these steps
                boostMultiplier: "auto" // you can also set a constant number as multiplier
            };

            var imagesParam = JSON.parse(localStorage.getItem("imagesParam"));
            if (imagesParam == undefined || imagesParam == null) {
                imagesParam = new Object();
            }

            $("input[type='number']").inputSpinner(config);

            var $first_number = $("#inputNumber0");
            var $second_number = $("#inputNumber1");
            var $third_number = $("#inputNumber2");
            var $confirmBtn = $("#confirmBtn");

            $confirmBtn.click( function (event) {
                var hashimage = localStorage.getItem("hashimage");
                var images = JSON.parse(localStorage.getItem("images"));
                var sourcename  = images.source.substr(images.source.lastIndexOf('/')+1);
                var src_name = hashimage + "/"+ sourcename;
                var dest_name = fileTitle;
                let flags = 0, sigma_s = 0, sigma_r = 0.0, shade_factor = 0.0;

                switch(fileTitle) {
                    case "ep": 
                        flags = $first_number.val();
                        sigma_s = $second_number.val();
                        sigma_r = $third_number.val();
                        break;
                    case "de": 
                        sigma_s = $first_number.val();
                        sigma_r = $second_number.val();
                        break;
                    case "style": 
                        sigma_s = $first_number.val();
                        sigma_r = $second_number.val();
                        break;
                    case "ps-gray":  
                        sigma_s = $first_number.val();
                        sigma_r = $second_number.val();
                        shade_factor = $third_number.val();
                        break;
                    case "ps-color": 
                        sigma_s = $first_number.val();
                        sigma_r = $second_number.val();
                        shade_factor = $third_number.val();
                        break;
                }

                imagesParam[fileTitle] = {
                    "flags" : flags,
                    "sigma_s" : sigma_s,
                    "sigma_r" : sigma_r,
                    "shade_factor" : shade_factor
                }

                //console.log("[DEBUG] ===> %s", JSON.stringify(imagesParam));
                //console.log("[DEBUG] src_name ===> %s", src_name);
                //console.log("[DEBUG] dest_name ===> %s", dest_name);

                localStorage.setItem("imagesParam",JSON.stringify(imagesParam));
                convertImageByParams(src_name,dest_name, flags, sigma_s, sigma_r, shade_factor);
            });

        </script>
 
        <!-- for AWS API Gateway.. -->
        <script type="text/javascript" src="lib/axios/dist/axios.standalone.js"></script>
        <script type="text/javascript" src="lib/CryptoJS/rollups/hmac-sha256.js"></script>
        <script type="text/javascript" src="lib/CryptoJS/rollups/sha256.js"></script>
        <script type="text/javascript" src="lib/CryptoJS/components/hmac.js"></script>
        <script type="text/javascript" src="lib/CryptoJS/components/enc-base64.js"></script>
        <script type="text/javascript" src="lib/url-template/url-template.js"></script>
        <script type="text/javascript" src="lib/apiGatewayCore/sigV4Client.js"></script>
        <script type="text/javascript" src="lib/apiGatewayCore/apiGatewayClient.js"></script>
        <script type="text/javascript" src="lib/apiGatewayCore/simpleHttpClient.js"></script>
        <script type="text/javascript" src="lib/apiGatewayCore/utils.js"></script>
        <script type="text/javascript" src="js/apigClient.js"></script>

        <!-- aws sdk -->
        <script type="text/javascript" src="https://sdk.amazonaws.com/js/aws-sdk-2.686.0.min.js"></script>

        <!-- To cartoonize an image-->
        <script src="js/fullimage.js"></script>

        <!-- Go to www.addthis.com/dashboard to customize your tools -->
        <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5ef5dffcd019cfb9"></script>
        <!-- Go to www.addthis.com/dashboard to customize your tools --> 
        <!--script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5ec37f060eca1146"></script--> 

    </body>

</html>